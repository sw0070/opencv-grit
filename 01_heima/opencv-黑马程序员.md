# opencv-黑马程序员

传送门：https://www.bilibili.com/video/BV1Fo4y1d7JL

## Introduction

### 课程内容

#### 定位

本课程是从事CV方向工作的基础课程，以OpenCV为基础，介绍传统的图像处理算法，为图像处理算法工作打下坚实的基础。

#### 主要内容

OpenCV是应用广泛的开源图像处理库，我们以其为基础，介绍相关的图像处理方法：包括基本的图像处理方法：几何变换，形态学变换，图像平滑，直方图操作，模板匹配，霍夫变换等；特征提取和描述方法：理解角点特征，Harris和Shi-Tomas算法，SIFT/SURF算法，Fast算法，ORB算法等；还有OpenCV在视频操作中的应用，最后的案例是使用OpenCV进行人脸检测。

## 1.opencv简介

### 主要内容

该章节主要介绍：

- 图像的起源和数字图像
- OpenCV的简介和部署方法
- OpenCV中包含的主要模块

### 1.1 图像处理简介

##### 学习目标

- 了解图像的起源

- 知道数字图像的表示

#### 1.1.1 图像的起源

##### a 图像是什么

![](.\imgs\img1\2.png)

##### 1.2 模拟图像和数字图像

![](.\imgs\img1\3.png)

1950年左右，计算机被发明，数字图像处理学科正式诞生

#### 1.1.2 数字图像的表示

##### a 位数

计算机采用0/1编码的系统，数字图像也是用0/1来记录信息。我们平常接触到的图像都是8位数图像，包含0~255灰度，其中0代表最黑，1表示最白

![](.\imgs\img1\4.png)

##### b 图像的分类

###### 二值图像

一幅二值图像的二维矩阵仅由0、1两个值构成，“0”代表黑色，“1”代白色。由于每一像素（矩阵中每一元素）取值仅有0、1两种可能，所以计算机中二值图像的数据类型通常为1个二进制位。二值图像通常用于文字、线条图的扫描识别(OCR)和掩膜图像的存储。

###### 灰度图

每个像素只有一个采样顾色的图像，这类图像通常显示为从最暗黑色到最亮的白色的灰度，尽管理论上这个采样可以任何顾色的不同深浅，甚至可以是不同亮度上的不同颜色。灰度图像与黑白图像不同，在计算机图像领域中黑白图像只有黑色与白色两种顾色；但是，灰度图像在黑色与白色之间还有许多级的顾色深度。灰度图像经常是在单个电磁波频谱如可见光内测量每个像素的亮度得到的，用于显示的灰度图像通常用每个采样像素8位的非线性尺度来保存，这样可以有256级灰度(如果用16位，则有65536级)。

###### 彩色图

 每个像素通常是由红（R）、绿(G)、蓝(B)三个分量来表示的，分量介于(0,255).RGB图像与索引图像一样都可以用来表示彩色图像。与索引图像一样，它分别用红（）、绿(G)、蓝(B)三原色的组合来表示每个像素的颜色。但与索引图像不同的是，RGB图像每一个像素的顾色值(由RGB三原色表示)直接存放在图像矩阵中，由于每一像素的颜色需由R、G、B三个分量来表示，M、N分别表示图像的行列数，三个M×N的二维矩阵分别表示各个像素的R、G、B三个颜色分量。RGB图像的数据类型一般为8位无符号整
形，通常用于表示和存放真彩色图像。

采用Quicker OCR识别功能

##### 总结

1.图像是什么？

图：物体反射或投射光的分布

像：视觉系统接受的图在人脑形成的认识或者印象

2.模拟图像和数字图像

模拟图像：连续存储的数据

数字图像 ：分级存储的数据

3.数字图像

位数：图像的表示，常见的是8位

分类：二值图像，灰度图像，彩色图像



### 1.2 OpenCV简介

学习目标

- 了解OpenCV是什么
- 能够独立安装OpenCV

#### 1.2.1 什么是OpenCV

##### a OpenCV简介

> OpenCV是一款由Intel公司俄罗斯团队发起并参与和维护的一个计算机视觉处理开源软件库，支持与计算机视觉和机器学习相关的众多算法，并且正在日益扩展。

OpenCV的优势：

`1.编程语言`
OpenCV基于C++实现，同时提供python,.Ruby,Matlab等语言的接口。OpenCV-Python是OpenCV的Python API,结合了OpenCV C++API和Python语言的最佳特性。
`2.跨平台`
可以在不同的系统平台上使用，包括Windows,Linux,OSX,Android和iOS。基于CUDA和OpenGL的高速GPU操作接口也在积极开发中
`3.活跃的开发团队`
`4.丰富的API`
完善的传统计算机视觉算法，涵盖主流的机器学习算法，同时添加了对深度学习的支持。

##### b OpenCV-Python

> OpenCV-Python是一个Python绑定库，旨在解决计算机视觉问题。
> Python是一种由Guido van Rossum开发的通用编程语言，它很快就变得非常流行，主要是因为它的简单性和代码可读性。它使程序员能够用更少的代码行表达思想，而不会降低可读性。
> 与C/C++等语言相比，Python速度较慢。也就是说，Python可以使用C/C++轻松扩展，这使我们可以在C/C++中编写计算密集型代码，并创建可用作Python模块的Python包装器。这给我们带来了两个好处：首
> 先，代码与原始C/C++代码一样快(因为它是在后台工作的实际C++代码)，其次，在Pyhon中编写代码比使用C/C++更容易。OpenCV-Python是原始OpenCV C++实现的Python包装器。
> OpenCV-Python使用Numpy,这是一个高度优化的数据库操作库，具有MATLAB风格的语法。所有OpenCV数组结构都转换为Numpy数组。这也使得与使用Numpy的其他库(如SciPy和Matplotlib)集成更容易。

#### 1.2.2 OpenCV部署方法

创建虚拟环境cv，在cv中安装即可

安装opencv-python

```python
pip install opencv-python==3.4.2.17
```

测试是否安装成功

```python
import cv2
img = cv2.imread('./img1.jpg')
cv2.imshow("image", img)
cv2.waitKey(0)
```

如果我们要利用SIFT和SURF进行特征提取，还需要安装：

```python
pip install opencv-contrib-python==3.4.2.17
```

总结

1.Opencv是计算机视觉的开源库

优势：

- 支持多种编程语言
- 跨平台
- 活跃的开发团队
- 丰富的API

### 1.3 OpenCV的模块

下图列出了OpenCV包含的模块

![](.\imgs\img1\5.png)

其中core、highgui、imgproc是最基础的模块，该课程主要是围绕这几个模块展开的，分别介绍如下：

- core模块实现了最核心的数据结构及其基本运算，如绘图函数、数组操作相关函数等。
- highgui模块实现了视频与图像的读取、显示、存储等接口。
- imgproc模块实现了图像处理的基础方法，包括图像滤波、图像的几何变换、平滑、阔值分割、形态学处理、边缘检测、目标检测、运动分析和对象跟踪等。

对于图像处理其他更高层次的方向及应用，OpenCV也有相关的模块实现

- features2d模块用于提取图像特征以及特征匹配，nonfree模块实现了一些专利算法，如sit特征。
- objdetect模块实现了一些目标检测的功能，经典的基于Haar、LBP特征的人脸检测，基于HOG的行人、汽车等目标检测，分类器使用Cascade Classification（级联分类）和Latent SVM等。
- stitching模块实现了图像拼接功能。
  FLANN模块(Fast Library for Approximate Nearest Neighbors),包含快速近似最近邻搜索FLANN和聚类Clustering算法。
- ml模块机器学习模块(SVM,决策树，Boosting等等)。
- photo模块包含图像修复和图像去噪两部分。
- video模块针对视频处理，如背景分离，前景检测、对象跟踪等。
- calib3d模块即Calibration（校准）3D,这个模块主要是相机校准和三维重建相关的内容。包含了基本的多视角几何算法，单个立体摄像头标定，物体姿态估计，立体相似性算法，3D信息的重建等等。
  G-API模块包含超高效的图像处理pipeline引擎

总结：

1.Opencv的模块

core:

haigui:

imgproc:

features2d:

## 2.OpenCV基本操作

#### 主要内容

本章主要介绍图像的基础操作，包括：

- 图像的IO操作，读取和保存方法
- 在图像上绘制几何图形
- 怎么获取图像的属性
- 怎么访问图像的像素，进行通道分离，合并等
- 怎么实现颜色空间的变换
- 图像的算术运算









